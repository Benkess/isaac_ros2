Bootstrap: docker
From: nvcr.io/nvidia/isaac-sim:{{ ISAAC_VERSION }}

%arguments
    ISAAC_VERSION=4.5.0

%environment
    export ROS_DISTRO=humble
    export LD_LIBRARY_PATH=/exts/isaacsim.ros2.bridge/humble/lib:$LD_LIBRARY_PATH
    export ISAAC_NUCLEUS_ROOT=/persistent/isaac/asset_root

%post
    # Ensure Debian package lists are up to date
    apt-get update && \
    # Install ROS 2 Humble core packages for CLI tools and bridge support
    apt-get install -y ros-humble-ros-base && \
    # Clean up
    rm -rf /var/lib/apt/lists/*

%runscript
    # By default launch Isaac Sim in GUI mode with the ROS 2 bridge
    exec /bin/bash -lc "\
      ./isaac-sim.sh \
        --/isaac/startup/ros_bridge_extension=isaacsim.ros2.bridge \
        \"\$@\""

%labels
    Author   mxk3rz
    Version  v0.0.0
    Ext3Overlay True

%help
    This container bundles Isaac Sim, Omniverse Runtime,
    Python, NVIDIA SDKs, and ROS 2 Humble for headless and GUI use.
